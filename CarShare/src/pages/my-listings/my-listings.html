<!--
  Generated template for the MyListingsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-toolbar>
  <button ion-button menuToggle left>
    <ion-icon name="menu"></ion-icon>
  </button>
  <ion-title>
    My Listings
  </ion-title>
</ion-toolbar>

<ion-content class="home-bg">
  <div id="container">
    <div id="content">

      <div id="noListingsContainer" [hidden]="userHasListings()">
        <div id='noListingsImage'></div>
        <div id='noListingsTitle'>You don't have any listings!</div>
        <div id='noListingsSubText'>Add a listing to be able to view it here</div>
        <button id='addAListingsBtn' ion-button block outline (click)='goToPostARide()'>Add a listing</button>
      </div>

      <div id="listingMargin" [hidden]="!userHasListings()">

        <ion-card *ngFor="let listing of listings; let i = index">
          <ion-grid>
            <div class="settings" (click)="presentSettingsPopover($event, i)">
              <i class="fas fa-cog"></i>
            </div>
            <div class="listingDetails" (click)="goToListingDetails(i)">
              <p>More info</p>
              <i class="far fa-arrow-alt-circle-right"></i>
            </div>
            <ion-card-content>
              <ion-col>
                <div id="carImageContainer">
                  <div id="carImage"></div>
                  <div id="vehicleDetails">
                    <div id="vehicleDetailsText">{{ listing.make }} {{ listing.model }} {{ listing.year }}</div>
                  </div>
                </div>
              </ion-col>
              <ion-col>
                <div class="lastItem">
                  <div class="IconSeparator">
                    <i class="fas fa-couch leftHandSideIcon"></i>
                    <p id="numSeats rightHandSideIcon">{{ listing.seatsAvailable }}</p>
                  </div>
                  <div class="IconSeparator">
                    <i class="fas fa-luggage-cart leftHandSideIcon"></i>
                    <i class="fas fa-check rightHandSideIcon" *ngIf="listing.storageSpace"></i>
                    <i class="fas fa-times rightHandSideIcon" *ngIf="!listing.storageSpace"></i>
                  </div>
                  <div class="IconSeparator" id="exlamationBtn" *ngIf="actionsToTake(i)" (click)="goToReviewShareRequests(i)">
                    <i class="fas fa-exclamation-circle" [style.color]="red"></i>
                    <p id="reviewTxt">Review</p>
                  </div>
                  <div class="IconSeparator rightHandSideIcon" *ngIf="!actionsToTake(i)" (click)="goToListingDetails(i)">
                    <i class="fas fa-info-circle"></i>
                  </div>
                </div>
                <div id="tillImageEnd">
                  <div class="QuarterSeparator">
                    <div class="listingTitle">From:</div>
                    <div class="listingText">{{ listing.meetingPoint }}
                    </div>
                  </div>
                  <div class="QuarterSeparator">
                    <div class="listingTitle">To:</div>
                    <div class="listingText">{{ listing.destination }}
                    </div>
                  </div>
                  <div class="QuarterSeparator">
                    <div class="listingTitle">When:</div>
                    <div class="listingText">{{ getFormattedDateTime(i) }}</div>
                  </div>
                </div>
              </ion-col>
            </ion-card-content>
          </ion-grid>
        </ion-card>
      </div>
    </div>
  </div>
</ion-content>